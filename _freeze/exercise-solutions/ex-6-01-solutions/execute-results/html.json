{
  "hash": "146d4c40eaa25d9d7ab53ad79373aeb4",
  "result": {
    "markdown": "---\ntitle: \"ex-6-01\"\nformat: html\neditor: visual\n---\n\n\n\n\n# Creating new variables exercise\n\nThis is supplementary information for the exercise you were given on June 1 on creating variables.\nI've provided some incomplete template code to help get you started on the exercises.\nIf you get stuck on something, copy and paste the contents of the code chunks here into your assignment.\nThen determine what you need to add to replace `XXXX`.\n\n## Q1\n\nCreate a version of `acs12` with a new variable called `long_commute` with the value \"yes\" if a respondent commutes more than 30 minutes to work and \"no\" otherwise.\n\n*hint: you need to know which variable tells you what someone's commute time is. How would you find this out?*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(acs12) # I'm using glimpse to figure out what variable measures someone's commute time\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,000\nColumns: 13\n$ income       <int> 60000, 0, NA, 0, 0, 1700, NA, NA, NA, 45000, NA, 8600, 0,…\n$ employment   <fct> not in labor force, not in labor force, NA, not in labor …\n$ hrs_work     <int> 40, NA, NA, NA, NA, 40, NA, NA, NA, 84, NA, 23, NA, NA, N…\n$ race         <fct> white, white, white, white, white, other, white, other, a…\n$ age          <int> 68, 88, 12, 17, 77, 35, 11, 7, 6, 27, 8, 69, 69, 17, 10, …\n$ gender       <fct> female, male, female, male, female, female, male, male, m…\n$ citizen      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, ye…\n$ time_to_work <int> NA, NA, NA, NA, NA, 15, NA, NA, NA, 40, NA, 5, NA, NA, NA…\n$ lang         <fct> english, english, english, other, other, other, english, …\n$ married      <fct> no, no, no, no, no, yes, no, no, no, yes, no, no, yes, no…\n$ edu          <fct> college, hs or lower, hs or lower, hs or lower, hs or low…\n$ disability   <fct> no, yes, no, no, yes, yes, no, yes, no, no, no, no, yes, …\n$ birth_qrtr   <fct> jul thru sep, jan thru mar, oct thru dec, oct thru dec, j…\n```\n:::\n\n```{.r .cell-code}\n# the output tells me it's time_to_work, which is numeric\n\nacs_longcommute <- mutate(acs12, \n       long_commute = case_when(time_to_work > 30 ~ \"yes\",\n                                time_to_work <= 30 ~ \"no\"))\n```\n:::\n\n\nEdit the above code to give this new dataset a name (aka, save it as an object).\n\n*hint: this is what `<-` is for*\n\nThen look at it in the data viewer (click its name in the \"Environment\" panel).\nDoes it look like your new variable worked as you expected?\n\n**Yes! It appears that everyone with a commute time of under 30 min (time_to_work) has \"no\" under longcommute, and everyone with a commute time of over 30 min has \"yes\" for longcommute. People with exactly 30 minute commutes are counted as not having long commutes, which is what we expected given the code above.**\n\n## Q2\n\nCreate a version of `acs12` with a new variable called `collegeplus`.\nIt should have the value `TRUE` if someone has a college or graduate school degree and `FALSE` if not.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# glimpse and unique help us figure out which variable we should be using (edu) and what its values are (\"hs or lower\", \"college\", \"grad\")\nglimpse(acs12)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,000\nColumns: 13\n$ income       <int> 60000, 0, NA, 0, 0, 1700, NA, NA, NA, 45000, NA, 8600, 0,…\n$ employment   <fct> not in labor force, not in labor force, NA, not in labor …\n$ hrs_work     <int> 40, NA, NA, NA, NA, 40, NA, NA, NA, 84, NA, 23, NA, NA, N…\n$ race         <fct> white, white, white, white, white, other, white, other, a…\n$ age          <int> 68, 88, 12, 17, 77, 35, 11, 7, 6, 27, 8, 69, 69, 17, 10, …\n$ gender       <fct> female, male, female, male, female, female, male, male, m…\n$ citizen      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, ye…\n$ time_to_work <int> NA, NA, NA, NA, NA, 15, NA, NA, NA, 40, NA, 5, NA, NA, NA…\n$ lang         <fct> english, english, english, other, other, other, english, …\n$ married      <fct> no, no, no, no, no, yes, no, no, no, yes, no, no, yes, no…\n$ edu          <fct> college, hs or lower, hs or lower, hs or lower, hs or low…\n$ disability   <fct> no, yes, no, no, yes, yes, no, yes, no, no, no, no, yes, …\n$ birth_qrtr   <fct> jul thru sep, jan thru mar, oct thru dec, oct thru dec, j…\n```\n:::\n\n```{.r .cell-code}\nunique(acs12$edu )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] college     hs or lower grad        <NA>       \nLevels: hs or lower college grad\n```\n:::\n\n```{.r .cell-code}\n# there are several ways to write this condition. Here's one: \nacs12_collegeplus <- mutate(acs12,\n                            collegeplus = case_when(edu != \"hs or lower\" ~ TRUE,\n                                                    edu == \"hs or lower\" ~ FALSE))\n\n# A second, totally equivalent one: \n# here, we're taking advantage of the fact that edu != \"hs or lower\" evaluates to either TRUE or FALSE\nacs12_collegeplus <- mutate(acs12,\n                            collegeplus = edu != \"hs or lower\")\n\n# Another one using | (or)\nacs12_collegeplus <- mutate(acs12,\n                            collegeplus = case_when(edu == \"college\" | edu == \"grad\" ~ TRUE,\n                                                    TRUE ~ FALSE)) # this \"catches\" everyone who's left over (ie, people who don't have either \"college\" or \"grad\" as their value for edu)\n```\n:::\n\n\nCheck your work by creating a table that shows you if your new variable maps onto the old variable in the way you expect.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(acs12_collegeplus$collegeplus, \n      acs12_collegeplus$edu, \n      useNA = \"always\")\n\n# This table shows us that everyone with \"hs or lower\" for edu has FALSE for collegeplus, and everyone who has \"college\" or \"grad\" for edu has TRUE for collegeplus. This is as we expect--it worked!\n```\n:::\n\n\n# Extra credit\n\nCreate a new variable that indicates whether someone works a.\nnot at all (0 work hours), b.\npart time (1-30 hours), c.\nfull time (30-50 hours), or d.\ntoo much (50+ hours).\nCheck the data to see if it worked correctly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacs12_workcat <- mutate(acs12,\n                        work = case_when(hrs_work == 0 ~ \"not at all\",\n                                         hrs_work <= 30 ~ \"part time\",\n                                         hrs_work <= 50 ~ \"full time\",\n                                         TRUE ~ \"too much\"))\n\n# I can check the data by looking at it in the environment pane\n```\n:::\n\n\nCreate a new variable that indicates whether someone is an English-speaking citizen, a non-English speaking citizen, an English-speaking non-citizen, or a non-English speaking non-citizen.\nCheck the data to see if it worked correctly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacs12_citizenlanguage <- mutate(acs12,\n                                citizenlang = case_when(citizen == \"yes\" & lang == \"english\" ~ \"english citizen\",\n                                                        citizen == \"no\" & lang == \"english\" ~ \"english noncitizen\",\n                                                        citizen == \"yes\" & lang != \"english\" ~ \"non english citizen\",\n                                                        citizen == \"no\" & lang != \"english\" ~ \"non english noncitizen\"))\n\n# this table shows us that everyone is in the category we expected!\ntable(acs12_citizenlanguage$citizenlang, acs12_citizenlanguage$citizen, acs12_citizenlanguage$lang)\n```\n:::\n\n\nDo the same thing as above, but this time use `|>` to provide the `acs12` dataset to the function\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacs12 |> \n  mutate(citizenlang = case_when(citizen == \"yes\" & lang == \"english\" ~ \"english citizen\",\n                                 citizen == \"no\" & lang == \"english\" ~ \"english noncitizen\",\n                                 citizen == \"yes\" & lang != \"english\" ~ \"non english citizen\",\n                                 citizen == \"no\" & lang != \"english\" ~ \"non english noncitizen\"))\n```\n:::\n\n\nUsing pipes (`|>`), create a variable that indicates whether someone is a married woman, unmarried woman, married man, or unmarried man, then remove all minors (less than 18 years old) from the dataset.\nCheck your work using tables, summary statistics, and/or by looking at the data frame.\n*This one is challenging!*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(acs12)\n\nacs_gendermarried <- acs12 |> \n  # this creates the gender/marriage combination variable\n  mutate(gendermarried = case_when(married == \"yes\" & gender == \"female\" ~ \"married woman\",\n                                    married == \"no\" & gender == \"female\" ~ \"unmarried woman\",\n                                    married == \"yes\" & gender == \"male\" ~ \"married man\",\n                                    married == \"no\" & gender == \"male\" ~ \"unmarried man\")) |> \n  # and this filters out all people under age 18\n  filter(age >= 18)\n\n# this checks the variable creation--the table shows us that everyone is in the right category\ntable(acs_gendermarried$gendermarried, acs_gendermarried$married, acs_gendermarried$gender)\n\n# this checks the filtering--our minimum age is 18, so we're good to go!\nsummary(acs_gendermarried$age)\n```\n:::\n\n\n# Submit\n\nAs usual, submit your work by committing your changes and then pushing to github!\nPlease submit before class on Tuesday 6-6.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}