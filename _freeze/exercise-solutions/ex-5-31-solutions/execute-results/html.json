{
  "hash": "914a236b51f1d2c4048d1ae105735cbc",
  "result": {
    "markdown": "---\ntitle: \"5-31-23 exercise: filtering\"\nformat: html\neditor: visual\n---\n\n\n## Setup\n\nFirst, we need to load some packages.\nClick the play button to run the code in the block below (remember, you only need to do this once per session).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(openintro)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: airports\nLoading required package: cherryblossom\nLoading required package: usdata\n```\n:::\n:::\n\n\n## Filtering\n\nLike yesterday, we will be working with the `acs12` data set.\n\nOften, we only want to analyze adult respondents.\nIn the chunk below, create a modified version of `acs12` that contains only respondents who are 18 or older.\nCall your new data frame `acs_adults`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nacs_adults <- filter(acs12, age >= 18)\n```\n:::\n\n\nLook at the summary statistics of the `age` variable in your new, filtered data frame.\nDid the filtering work?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(acs_adults$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  18.00   33.00   49.00   49.06   63.00   94.00 \n```\n:::\n\n```{.r .cell-code}\n# yes, filtering worked! Our minimum age is now 18\n```\n:::\n\n\nHow many respondents are left in this new data frame?\n(we started with 2000)\n\n(hint: there are multiple ways to do this, some of which involve code, one of which involves looking at the entry for your new data frame in the \"environment\" RStudio panel)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(acs_adults)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,561\nColumns: 13\n$ income       <int> 60000, 0, 0, 1700, 45000, 8600, 0, 33500, 4000, 19000, 34…\n$ employment   <fct> not in labor force, not in labor force, not in labor forc…\n$ hrs_work     <int> 40, NA, NA, 40, 84, 23, NA, 55, 8, 35, 25, NA, 12, 40, 8,…\n$ race         <fct> white, white, white, other, white, white, white, white, w…\n$ age          <int> 68, 88, 77, 35, 27, 69, 69, 52, 67, 36, 40, 27, 18, 35, 3…\n$ gender       <fct> female, male, female, female, male, female, male, male, f…\n$ citizen      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, ye…\n$ time_to_work <int> NA, NA, NA, 15, 40, 5, NA, 20, 10, 15, NA, NA, NA, 30, 20…\n$ lang         <fct> english, english, other, other, english, english, english…\n$ married      <fct> no, no, no, yes, yes, no, yes, yes, yes, yes, no, no, no,…\n$ edu          <fct> college, hs or lower, hs or lower, hs or lower, hs or low…\n$ disability   <fct> no, yes, yes, yes, no, no, yes, no, no, no, yes, no, no, …\n$ birth_qrtr   <fct> jul thru sep, jan thru mar, jul thru sep, jul thru sep, o…\n```\n:::\n\n```{.r .cell-code}\n# glimpse shows us that there are 1561 rows in the data frame now. We can also see this by looking at the information on acs_adults in the environment tab.\n```\n:::\n\n\n## Extra credit\n\nUse the chunks below to create other subsets of the `acs12` data.\nDo as many or as few as you feel are useful to you.\nWhen you feel like you've got the basics down, try out some of the more complex filtering operators we discussed.\n\nCheck your results by looking at summary statistics or tables.\nLook at your new data frames by opening them up from the environment panel.\n\n#### For practice with simple comparison operators (`==`, `!=`, `<`, `<=`, `>`, `>=`):\n\n-   Include only US citizens\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    acs_citizens <- filter(acs12, citizen == \"yes\")\n    \n    table(acs_citizens$citizen)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    \n      no  yes \n       0 1882 \n    ```\n    :::\n    :::\n\n\n-   Include only people who are not White\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    acs_poc <- filter(acs12, race != \"white\")\n    \n    table(acs_poc$race)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    \n    white black asian other \n        0   206    87   152 \n    ```\n    :::\n    :::\n\n\n-   Include only people who are retirement age (\\>67).\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    acs_retired <- filter(acs12, age > 67)\n    \n    summary(acs_retired$age)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n       Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n      68.00   71.00   76.00   77.21   82.00   94.00 \n    ```\n    :::\n    :::\n\n\n-   Exclude people who were born in winter\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    glimpse(acs12) # variable is birth_qrtr\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    Rows: 2,000\n    Columns: 13\n    $ income       <int> 60000, 0, NA, 0, 0, 1700, NA, NA, NA, 45000, NA, 8600, 0,…\n    $ employment   <fct> not in labor force, not in labor force, NA, not in labor …\n    $ hrs_work     <int> 40, NA, NA, NA, NA, 40, NA, NA, NA, 84, NA, 23, NA, NA, N…\n    $ race         <fct> white, white, white, white, white, other, white, other, a…\n    $ age          <int> 68, 88, 12, 17, 77, 35, 11, 7, 6, 27, 8, 69, 69, 17, 10, …\n    $ gender       <fct> female, male, female, male, female, female, male, male, m…\n    $ citizen      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, ye…\n    $ time_to_work <int> NA, NA, NA, NA, NA, 15, NA, NA, NA, 40, NA, 5, NA, NA, NA…\n    $ lang         <fct> english, english, english, other, other, other, english, …\n    $ married      <fct> no, no, no, no, no, yes, no, no, no, yes, no, no, yes, no…\n    $ edu          <fct> college, hs or lower, hs or lower, hs or lower, hs or low…\n    $ disability   <fct> no, yes, no, no, yes, yes, no, yes, no, no, no, no, yes, …\n    $ birth_qrtr   <fct> jul thru sep, jan thru mar, oct thru dec, oct thru dec, j…\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    unique(acs12$birth_qrtr) # value is \"jan thru mar\"\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    [1] jul thru sep jan thru mar oct thru dec apr thru jun\n    Levels: jan thru mar apr thru jun jul thru sep oct thru dec\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    acs_nowinter <- filter(acs12,\n           birth_qrtr != \"jan thru mar\")\n    \n    table(acs_nowinter$birth_qrtr)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    \n    jan thru mar apr thru jun jul thru sep oct thru dec \n               0          479          504          532 \n    ```\n    :::\n    :::\n\n\n#### For practice with more complex comparison operators:\n\n-   Include only the people who are not in the labor force but still say they work more than 20 hours per week (??)\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    unique(acs12$employment) # \"not in labor force\" is the value we're interested in\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    [1] not in labor force <NA>               employed           unemployed        \n    Levels: not in labor force unemployed employed\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    acs_confusingwork <- filter(acs12, hrs_work > 20 & employment == \"not in labor force\")\n    \n    # table checks the employment variable--we only have people who are not in the labor force\n    table(acs_confusingwork$employment)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    \n    not in labor force         unemployed           employed \n                    47                  0                  0 \n    ```\n    :::\n    \n    ```{.r .cell-code}\n    # and summary checks hrs_work: we only have people who work more than 20 hours.\n    summary(acs_confusingwork$hrs_work)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n       Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n      23.00   33.50   40.00   38.77   40.00   99.00 \n    ```\n    :::\n    :::\n\n\n-   Include only Black and Asian respondents\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    unique(acs12$race)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    [1] white other asian black\n    Levels: white black asian other\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    acs_blackasian <- filter(acs12, \n                             race == \"black\" | race == \"asian\")\n    \n    table(acs_blackasian$race)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    \n    white black asian other \n        0   206    87     0 \n    ```\n    :::\n    :::\n\n\n-   Include only the people who reported a usable (not-NA) commute time\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    acs_withcommutes <- filter(acs12, !is.na(time_to_work))\n    \n    # no NA's reported!\n    summary(acs_withcommutes$time_to_work)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n       Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n          1      10      20      26      30     163 \n    ```\n    :::\n    :::\n\n\n-   Include people who have a disability or are unemployed\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # checking for variable names: we want \"disability\", which has yes/no values, and \"employment\", where the relevant value is \"unemployed\"\n    glimpse(acs12)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n    Rows: 2,000\n    Columns: 13\n    $ income       <int> 60000, 0, NA, 0, 0, 1700, NA, NA, NA, 45000, NA, 8600, 0,…\n    $ employment   <fct> not in labor force, not in labor force, NA, not in labor …\n    $ hrs_work     <int> 40, NA, NA, NA, NA, 40, NA, NA, NA, 84, NA, 23, NA, NA, N…\n    $ race         <fct> white, white, white, white, white, other, white, other, a…\n    $ age          <int> 68, 88, 12, 17, 77, 35, 11, 7, 6, 27, 8, 69, 69, 17, 10, …\n    $ gender       <fct> female, male, female, male, female, female, male, male, m…\n    $ citizen      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, ye…\n    $ time_to_work <int> NA, NA, NA, NA, NA, 15, NA, NA, NA, 40, NA, 5, NA, NA, NA…\n    $ lang         <fct> english, english, english, other, other, other, english, …\n    $ married      <fct> no, no, no, no, no, yes, no, no, no, yes, no, no, yes, no…\n    $ edu          <fct> college, hs or lower, hs or lower, hs or lower, hs or low…\n    $ disability   <fct> no, yes, no, no, yes, yes, no, yes, no, no, no, no, yes, …\n    $ birth_qrtr   <fct> jul thru sep, jan thru mar, oct thru dec, oct thru dec, j…\n    ```\n    :::\n    \n    ```{.r .cell-code}\n    acs_disabled_or_unemployed <- filter(acs12,\n                                         disability == \"yes\" | employment == \"unemployed\")\n    \n    # the table shows that we have people with disabilities, people who are unemployed, and people who both have a disability and are unemployed. But there are no people who neither have a disability nor are unemployed. So this worked as expected!\n    table(acs_disabled_or_unemployed$disability, acs_disabled_or_unemployed$employment)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    ```\n         \n          not in labor force unemployed employed\n      no                   0         85        0\n      yes                223         21       70\n    ```\n    :::\n    :::\n\n\n-   Include non-retired adults (people who are older than 18 but younger than 67)\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # I should have phrased this question better; really if we're interested in adults it should be 18 or older, not older than 18.\n    acs_workingadults <- filter(acs12, age >= 18 & age < 67)\n    ```\n    :::\n\n\n#### Other subsets that interest you:\n\n\n::: {.cell}\n\n:::\n\n\n## Submission\n\nWhen you are done, commit your changes and push them to GitHub!\n([instructions](https://soc333-sum23.github.io/computing-clonerepo.html))\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}