{
  "hash": "852aad54cf5a766934b7c1871b4f4f20",
  "result": {
    "markdown": "---\ntitle: \"Quantifying uncertainty\"\ncategories: \n  - Application exercise\n  - Answers\neditor: visual\neditor_options: \n  chunk_output_type: console\n---\n\n\nAn article in the The Asheville Citizen-Times published in the summer of 2020 claims that the average price per guest (ppg) for properties in Asheville is \\$60 on Airbnb.\nTo evaluate their claim we will use a dataset on 50 randomly selected Asheville Airbnb listings in June 2020.\nThese data can be found in `data/asheville.csv`.\n\nLet's load the packages we'll use first.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n```\n:::\n\n\nAnd then the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabb <- read_csv(\"data/asheville.csv\")\nglimpse(abb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 50\nColumns: 1\n$ ppg <dbl> 48.00000, 40.00000, 99.00000, 13.00000, 55.00000, 75.00000, 74.000…\n```\n:::\n:::\n\n\n# Hypotheses\n\n-   **Your turn:** Write out the correct null and alternative hypothesis.\n    Do this in both words *and* in proper notation.\n\n**Null hypothesis:** The average price per guest (ppg) in Asheville is \\$60.\n\n$$H_0: \\mu = 60$$\n\n**Alternative hypothesis:** The average price per guest (ppg) in Asheville is different than \\$60.\n\n$$H_A: \\mu \\ne 60$$\n\n# Observed data\n\nOur goal is to use calculate the probability of a sample statistic at least as extreme as the one observed in our data if in fact the null hypothesis is true.\n\n-   **Demo:** Calculate and report the sample statistic below using proper notation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nabb |>\n  summarize(mean_ppg = mean(ppg))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  mean_ppg\n     <dbl>\n1     76.6\n```\n:::\n:::\n\n\n$$\\bar{x} = 76.6$$\n\n# The null distribution\n\nLet's use simulation-based methods to conduct the hypothesis test specified above.\n\n## Generate\n\nWe'll start by generating the null distribution.\n\n-   **Demo:** Generate the null distribution?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(4321)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_dist <- abb |>\n  specify(response = ppg) |>\n  hypothesize(null = \"point\", mu = 60) |>\n  generate(reps = 100, type = \"bootstrap\") |>\n  calculate(stat = \"mean\")\n```\n:::\n\n\n-   **Your turn:** Take a look at `null_dist`.\n    What does each element in this distribution represent?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_dist\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: ppg (numeric)\nNull Hypothesis: point\n# A tibble: 100 × 2\n   replicate  stat\n       <int> <dbl>\n 1         1  63.7\n 2         2  50.7\n 3         3  74.3\n 4         4  56.7\n 5         5  66.1\n 6         6  50.5\n 7         7  52.8\n 8         8  62.4\n 9         9  55.9\n10        10  58.7\n# … with 90 more rows\n```\n:::\n:::\n\n\n## Visualize\n\n-   **Question:** Before you visualize the distribution of `null_dist` -- at what value would you expect this distribution to be centered?\n    Why?\n\nAt 60, since we created this distribution assuming $\\mu = 60$.\n\n-   **Demo:** Create an appropriate visualization for your null distribution.\n    Does the center of the distribution match what you guessed in the previous question?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(null_dist, aes(x = stat)) +\n  geom_dotplot()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nBin width defaults to 1/30 of the range of the data. Pick better value with\n`binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](ae-18-hypothesis-testing-A_files/figure-html/null-dist-visualize-1.png){width=672}\n:::\n:::\n\n\n-   **Demo:** Now, add a vertical red line on your null distribution that represents your sample statistic.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(null_dist, aes(x = stat)) +\n  geom_dotplot() +\n  geom_vline(xintercept = 76.6, color = \"red\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nBin width defaults to 1/30 of the range of the data. Pick better value with\n`binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](ae-18-hypothesis-testing-A_files/figure-html/null-dist-annotate-1.png){width=672}\n:::\n:::\n\n\n-   **Question:** Based on the position of this line, does your observed sample mean appear to be an unusual observation under the assumption of the null hypothesis?\n\nYes, it's pretty far from the center.\n\n# p-value\n\nAbove, we eyeballed how likely/unlikely our observed mean is.\nNow, let's actually quantify it using a p-value.\n\n-   **Question:** What is a p-value?\n\nThe probability of the observed sample statistic, or something more extreme in the direction of the alternative hypothesis, if in fact the null hypothesis is true.\n\n-   **Demo:** Visualize the p-value.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(null_dist, aes(x = stat)) +\n  geom_dotplot() +\n  geom_vline(xintercept = 76.6, color = \"red\") +\n  geom_vline(xintercept = 43.4, color = \"red\", linetype = \"dashed\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nBin width defaults to 1/30 of the range of the data. Pick better value with\n`binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](ae-18-hypothesis-testing-A_files/figure-html/p-value-visualize-1.png){width=672}\n:::\n:::\n\n\n-   **Your turn:** What is the p-value?\n\n2/100 = 0.02.\n\n# Conclusion\n\n-   **Your turn:** What is the conclusion of the hypothesis test based on the p-value you calculated?\n    Make sure to frame it in context of the data and the research question.\n    Use a significance level of 5% to make your conclusion.\n\nSince the p-value is smaller than the significance level, we reject the null hypothesis.\nThe data provide convincing evidence that the average price per guest of properties on Airbnb in Asheville is different than \\$60.\n\n-   **Demo:** Interpret the p-value in context of the data and the research question.\n\nIf in fact the true average price per guest of properties on Airbnb in Ashevlle is \\$60, the probability of observing a random sample of 50 Asheville Airbnb listings where the average price per guest is \\$76.6 or higher or \\$43.4 or lower is 0.02.\n\n# Get real...\n\n-   **Question:** What we did above was a \"toy example\" to illustrate hypothesis test.\n    What would you change to make this a real, more robust analysis?\n\nChange the number of resamples to a higher number, somewhere \\~10,000 replicates.\n\n-   **Demo:** Work through the analysis again with these changes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_dist <- abb |>\n  specify(response = ppg) |>\n  hypothesize(null = \"point\", mu = 60) |>\n  generate(reps = 10000, type = \"bootstrap\") |>\n  calculate(stat = \"mean\")\n\npoint_estimate <- abb |>\n  specify(response = ppg) |>\n  calculate(stat = \"mean\")\n\nget_p_value(null_dist, point_estimate, direction = \"two-sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1  0.0246\n```\n:::\n\n```{.r .cell-code}\nvisualize(null_dist) +\n  shade_p_value(obs_stat = point_estimate, direction = \"two-sided\")\n```\n\n::: {.cell-output-display}\n![](ae-18-hypothesis-testing-A_files/figure-html/hypothesis-test-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "ae-18-hypothesis-testing-A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}